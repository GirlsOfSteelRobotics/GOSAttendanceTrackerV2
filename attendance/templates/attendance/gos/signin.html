{% extends "attendance/base.html" %}
{% load static %}

{% block title %}GoS Sign-In - GOS Attendance{% endblock %}

{% block body_id %}gos{% endblock %}

{% block content %}
<div class="container" id="gos">
  <div class="row text-center">
    <div class="col-12 col-lg-8 offset-lg-2">
      <img src="{% static 'gos_logo3.png' %}" class="img-fluid mx-auto d-block" alt="GOS Logo"/>
    </div>
  </div>

  <div class="mt-3">
    <h3>SCRA visitors: Click <a href="{% url 'scra_signin' %}">here</a> to sign in.</h3>
  </div>

  {% include "attendance/shared/messages.html" %}

  <form class="row g-3 align-items-end" action="{% url 'gos_log_attendance_rfid' %}" method="post" onsubmit="this.querySelector('[type=submit]').disabled=true">
    {% csrf_token %}
    <div class="col-12"><legend><h1>GoS - Tap your RFID keyfob</h1></legend></div>
    <div class="col-md-2"><label for="rfid" class="form-label">RFID</label></div>
    <div class="col-md-8">
      <input type="text" id="rfid" name="rfid" class="form-control" inputmode="numeric" pattern="[0-9]*" autofocus autocomplete="off" aria-describedby="rfidHelp">
      <div id="rfidHelp" class="form-text">Tap your keyfob or type your number and press Enter.</div>
    </div>
    <div class="col-md-2"><button type="submit" class="btn btn-primary w-100">Sign In</button></div>
  </form>

  <hr class="my-4">

  <form class="row g-3 align-items-end" action="{% url 'gos_log_attendance_name' %}" method="post" onsubmit="this.querySelector('[type=submit]').disabled=true">
    {% csrf_token %}
    <div class="col-12"><legend><h1>GoS - Sign In with Full Name</h1></legend></div>
    <div class="col-md-2"><label for="full_name" class="form-label">Full Name</label></div>
    <div class="col-md-8"><input id="full_name" name="full_name" class="form-control" placeholder="First Last" autocomplete="off" autocapitalize="words"></div>
    <div class="col-md-2"><button type="submit" class="btn btn-primary w-100">Sign In</button></div>
  </form>
</div>

<script>
  (function(){
    const rfid = document.getElementById('rfid');
    if (rfid) {
      rfid.addEventListener('keydown', function(e){ if (e.key === 'Enter') { e.preventDefault(); e.target.form && e.target.form.submit(); }});
    }
  })();
</script>
{% endblock %}